[
  {
    "cmd": [
      "python",
      "-u",
      "RECIPE_MODULE[recipe_engine::file]/resources/fileutil.py",
      "--json-output",
      "/path/to/tmp/json",
      "copy",
      "None/chrome/VERSION",
      "/path/to/tmp/"
    ],
    "infra_step": true,
    "name": "get version"
  },
  {
    "cmd": [
      "None/build/android/adb_install_apk.py",
      "None/out/Release/apks/SystemWebView.apk",
      "-v",
      "--blacklist-file",
      "None/out/bad_devices.json",
      "--adb-path",
      "None/third_party/android_tools/sdk/platform-tools/adb",
      "--release"
    ],
    "env": {
      "PATH": "None/third_party/android_tools/sdk/platform-tools:None/build/android:<PATH>"
    },
    "infra_step": true,
    "name": "install SystemWebView.apk"
  },
  {
    "cmd": [
      "python",
      "-u",
      "None/android_webview/tools/run_cts.py",
      "--arch",
      "arm64",
      "--platform",
      "M",
      "--skip-expected-failures",
      "--apk-dir",
      "[CACHE]",
      "--json-results-file",
      "/path/to/tmp/json",
      "--verbose"
    ],
    "name": "Run CTS",
    "~followup_annotations": [
      "@@@STEP_TEXT@<br/>deterministic failures [caused step to fail]:<br/>Test.Two<br/>@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@Test 'Test.Two' completed with the following status(es): 'FAILURE'@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@Test 'Test.Two' had the following logs when run:@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@================================================================================@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@:(@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@================================================================================@@@",
      "@@@STEP_LOG_END@Deterministic failure: Test.Two (status FAILURE)@@@",
      "@@@STEP_FAILURE@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "None/build/android/pylib/results/presentation/test_results_presentation.py",
      "--json-file",
      "{\"per_iteration_data\": [{\"Test.One\": [{\"elapsed_time_ms\": 0, \"output_snippet\": \":)\", \"status\": \"SUCCESS\"}], \"Test.Three\": [{\"elapsed_time_ms\": 0, \"output_snippet\": \"\", \"status\": \"SUCCESS\"}], \"Test.Two\": [{\"elapsed_time_ms\": 0, \"output_snippet\": \":(\", \"status\": \"FAILURE\"}]}]}",
      "--test-name",
      "CTS",
      "--builder-name",
      "TestBuilder",
      "--build-number",
      "571",
      "--cs-base-url",
      "http://cs.chromium.org",
      "--bucket",
      "chromium-result-details"
    ],
    "name": "CTS: generate result details",
    "stdout": "/path/to/tmp/",
    "~followup_annotations": [
      "@@@STEP_LINK@result_details (logcats, flakiness links)@https://storage.cloud.google.com/chromium-result-details@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "import sys; sys.exit(0)"
    ],
    "name": "Report WebView CTS: M results",
    "~followup_annotations": [
      "@@@STEP_TEXT@<br/>deterministic failures [caused step to fail]:<br/>Test.Two<br/>@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@Test 'Test.Two' completed with the following status(es): 'FAILURE'@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@Test 'Test.Two' had the following logs when run:@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@================================================================================@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@:(@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@@@@",
      "@@@STEP_LOG_LINE@Deterministic failure: Test.Two (status FAILURE)@================================================================================@@@",
      "@@@STEP_LOG_END@Deterministic failure: Test.Two (status FAILURE)@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "RECIPE_MODULE[build::test_results]/resources/upload_test_results.py",
      "--input-json",
      "{\"per_iteration_data\": [{\"Test.One\": [{\"elapsed_time_ms\": 0, \"output_snippet\": \":)\", \"status\": \"SUCCESS\"}], \"Test.Three\": [{\"elapsed_time_ms\": 0, \"output_snippet\": \"\", \"status\": \"SUCCESS\"}], \"Test.Two\": [{\"elapsed_time_ms\": 0, \"output_snippet\": \":(\", \"status\": \"FAILURE\"}]}]}",
      "--master-name",
      "chromium.testing.master",
      "--builder-name",
      "TestBuilder",
      "--build-number",
      "571",
      "--test-type",
      "Run CTS",
      "--chrome-revision",
      "refs/x@{#0}",
      "--test-results-server",
      "test-results.appspot.com"
    ],
    "name": "Upload to test-results [Run CTS]"
  },
  {
    "cmd": [],
    "name": "details",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@details@compile_targets: ['system_webview_apk']@@@",
      "@@@STEP_LOG_LINE@details@uses_local_devices: True@@@",
      "@@@STEP_LOG_END@details@@@"
    ]
  },
  {
    "failure": {
      "failure": {
        "step": "Run CTS"
      },
      "humanReason": "Step('Run CTS') failed with return_code 1"
    },
    "name": "$result"
  }
]
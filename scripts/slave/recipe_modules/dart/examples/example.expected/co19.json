[
  {
    "cmd": [
      "python",
      "-u",
      "RECIPE_REPO[depot_tools]/gclient.py",
      "revinfo",
      "--filter=https://chrome-infra-packages.appspot.com/dart/third_party/co19",
      "--filter=https://chrome-infra-packages.appspot.com/dart/third_party/co19/legacy",
      "--output-json",
      "/path/to/tmp/json"
    ],
    "cwd": "[CACHE]/builder/sdk",
    "env_suffixes": {
      "PATH": [
        "RECIPE_REPO[depot_tools]"
      ]
    },
    "infra_step": true,
    "name": "gclient get co19 versions",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output[revinfo]@{@@@",
      "@@@STEP_LOG_LINE@json.output[revinfo]@  \"sdk/tests/co19/src:dart/third_party/co19\": {@@@",
      "@@@STEP_LOG_LINE@json.output[revinfo]@    \"rev\": \"git_revision:co19_hash\", @@@",
      "@@@STEP_LOG_LINE@json.output[revinfo]@    \"url\": \"https://chrome-infra-packages.appspot.com/dart/third_party/co19\"@@@",
      "@@@STEP_LOG_LINE@json.output[revinfo]@  }, @@@",
      "@@@STEP_LOG_LINE@json.output[revinfo]@  \"sdk/tests/co19_2/src:dart/third_party/co19/legacy\": {@@@",
      "@@@STEP_LOG_LINE@json.output[revinfo]@    \"rev\": \"git_revision:co19_2_hash\", @@@",
      "@@@STEP_LOG_LINE@json.output[revinfo]@    \"url\": \"https://chrome-infra-packages.appspot.com/dart/third_party/co19/legacy\"@@@",
      "@@@STEP_LOG_LINE@json.output[revinfo]@  }@@@",
      "@@@STEP_LOG_LINE@json.output[revinfo]@}@@@",
      "@@@STEP_LOG_END@json.output[revinfo]@@@"
    ]
  },
  {
    "cmd": [],
    "name": "trigger shards for co19"
  },
  {
    "cmd": [
      "python",
      "-u",
      "[CACHE]/builder/sdk/tools/swarming_client/swarming.py",
      "trigger",
      "--shards",
      "1",
      "--swarming",
      "https://chromium-swarm.appspot.com",
      "--isolate-server",
      "https://isolateserver.appspot.com",
      "--namespace",
      "default-gzip",
      "--priority",
      "25",
      "--task-name",
      "co19_shard_1/Linux/test_hash/co19/1357",
      "--dump-json",
      "/path/to/tmp/json",
      "--expiration",
      "3600",
      "--io-timeout",
      "1200",
      "--hard-timeout",
      "3600",
      "--dimension",
      "cpu",
      "x86-64",
      "--dimension",
      "os",
      "Linux",
      "--dimension",
      "pool",
      "dart.tests",
      "--named-cache",
      "swarming_module_cache_vpython",
      ".swarming_module_cache/vpython",
      "--tag",
      "build_is_experimental:false",
      "--tag",
      "buildername:co19",
      "--tag",
      "buildnumber:1357",
      "--tag",
      "data:test_hash",
      "--tag",
      "name:co19_shard_1",
      "--tag",
      "slavename:trusty-dart-123",
      "--tag",
      "spec_name:dart.ci:co19",
      "--tag",
      "stepname:co19_shard_1",
      "--cipd-package",
      ".swarming_module:infra/tools/luci/logdog/butler/${platform}:TEST_VERSION",
      "--cipd-package",
      ".swarming_module:infra/tools/luci/vpython-native/${platform}:TEST_VERSION",
      "--cipd-package",
      ".swarming_module:infra/tools/luci/vpython/${platform}:TEST_VERSION",
      "--cipd-package",
      ".swarming_module/cpython:infra/python/cpython/${platform}:TEST_VERSION",
      "--cipd-package",
      ".swarming_module/cpython3:infra/python/cpython3/${platform}:TEST_VERSION",
      "--cipd-package",
      "tests/co19/src:dart/third_party/co19:git_revision:co19_hash",
      "--cipd-package",
      "tests/co19_2/src:dart/third_party/co19/legacy:git_revision:co19_2_hash",
      "--cipd-package",
      "tools/sdks:dart/dart-sdk/${platform}:",
      "--env-prefix",
      "PATH",
      ".swarming_module",
      "--env-prefix",
      "PATH",
      ".swarming_module/cpython/bin",
      "--env-prefix",
      "PATH",
      ".swarming_module/cpython3/bin",
      "--env-prefix",
      "VPYTHON_VIRTUALENV_ROOT",
      ".swarming_module_cache/vpython",
      "--isolated",
      "test_hash",
      "--raw-cmd",
      "--",
      "tools/test.py",
      "--progress=status",
      "--report",
      "--time",
      "--silent-failures",
      "--write-results",
      "--write-logs",
      "--clean-exit",
      "co19",
      "co19_2",
      "--copy-coredumps",
      "--shards=1",
      "--shard=1",
      "--output-directory=${ISOLATED_OUTDIR}"
    ],
    "cwd": "[CACHE]/builder/sdk",
    "env": {
      "BUILDBOT_BUILDERNAME": "co19-be"
    },
    "env_suffixes": {
      "PATH": [
        "RECIPE_REPO[depot_tools]"
      ]
    },
    "infra_step": true,
    "name": "trigger shards for co19.[trigger] co19_shard_1",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@",
      "@@@STEP_TEXT@Run on OS: 'Linux'@@@",
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"base_task_name\": \"co19_shard_1/Linux/test_hash/co19/1357\", @@@",
      "@@@STEP_LOG_LINE@json.output@  \"tasks\": {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"co19_shard_1/Linux/test_hash/co19/1357\": {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"shard_index\": 0, @@@",
      "@@@STEP_LOG_LINE@json.output@      \"task_id\": \"10000\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"view_url\": \"https://chromium-swarm.appspot.com/user/task/10000\"@@@",
      "@@@STEP_LOG_LINE@json.output@    }@@@",
      "@@@STEP_LOG_LINE@json.output@  }@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@",
      "@@@STEP_LINK@shard #0@https://chromium-swarm.appspot.com/user/task/10000@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "RECIPE_REPO[build]/scripts/tools/runit.py",
      "--show-path",
      "--with-third-party-lib",
      "--",
      "python",
      "RECIPE_MODULE[build::chromium_swarming]/resources/collect_task.py",
      "--verbose",
      "-o",
      "/path/to/tmp/json",
      "--task-output-dir",
      "/path/to/tmp/",
      "--merge-script",
      "RECIPE_MODULE[build::chromium_swarming]/resources/noop_merge.py",
      "--merge-script-stdout-file",
      "/path/to/tmp/merge_script_log",
      "--merge-additional-args",
      "[]",
      "--summary-json-file",
      "/path/to/tmp/json",
      "--",
      "swarming",
      "collect",
      "-server",
      "https://chromium-swarm.appspot.com",
      "-worker",
      "50",
      "-task-summary-python",
      "-task-output-stdout",
      "all",
      "-verbose",
      "-requests-json",
      "{\"tasks\": [{\"task_id\": \"10000\"}]}"
    ],
    "env_prefixes": {
      "PATH": [
        "[CACHE]/swarming_client"
      ]
    },
    "name": "co19_shard_1",
    "~followup_annotations": [
      "@@@STEP_TEXT@Run on OS: 'Linux'<br>Pending time: 1m 11s<br>Shard runtime (32s) + overhead (29s): 1m 0s@@@",
      "@@@STEP_LOG_LINE@json.output@{}@@@",
      "@@@STEP_LOG_END@json.output@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@{@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@  \"shards\": [@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@    {@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"bot_id\": \"vm30\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"completed_ts\": \"2014-09-25T01:43:11.123\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"created_ts\": \"2014-09-25T01:41:00.123\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"duration\": 31.5, @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"exit_code\": 0, @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"failure\": false, @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"internal_failure\": false, @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"modified_ts\": \"2014-09-25 01:42:00\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"name\": \"heartbeat-canary-2014-09-25_01:41:55-os=Windows\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"output\": \"Heart beat succeeded on win32.\\nFoo\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"outputs_ref\": {@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@        \"isolated\": \"abc123\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@        \"isolatedserver\": \"https://isolateserver.appspot.com\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@        \"namespace\": \"default-gzip\"@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      }, @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"started_ts\": \"2014-09-25T01:42:11.123\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"state\": \"COMPLETED\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"task_id\": \"148aa78d7aa0000\"@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@    }@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@  ]@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@}@@@",
      "@@@STEP_LOG_END@chromium_swarming.summary@@@",
      "@@@STEP_LOG_LINE@Merge script log@Successfully merged all data@@@",
      "@@@STEP_LOG_END@Merge script log@@@",
      "@@@STEP_LOG_LINE@results.json@{\"name\":\"test1\"}@@@",
      "@@@STEP_LOG_LINE@results.json@{\"name\":\"test2\"}@@@",
      "@@@STEP_LOG_END@results.json@@@",
      "@@@STEP_LOG_LINE@logs.json@{\"test\":\"log\"}@@@",
      "@@@STEP_LOG_END@logs.json@@@",
      "@@@STEP_LINK@shard #0 isolated out@https://isolateserver.appspot.com/browse?namespace=default-gzip&hash=abc123@@@",
      "@@@STEP_LINK@test stdout of shard #0@https://chromium-swarm.appspot.com/user/task/10000@@@"
    ]
  },
  {
    "cmd": [
      "[CACHE]/builder/sdk/tools/sdks/dart-sdk/bin/dart",
      "tools/bots/compare_results.dart",
      "--flakiness-data",
      "LATEST/flaky.json",
      "--changed",
      "--passing",
      "--failing",
      "--count",
      "50",
      "LATEST/results.json",
      "{\"name\":\"test1\",\"bot_name\":\"vm30\"}\n{\"name\":\"test2\",\"bot_name\":\"vm30\"}\n"
    ],
    "cwd": "[CACHE]/builder/sdk",
    "name": "deflaking.list tests to deflake (co19)",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@",
      "@@@STEP_LOG_LINE@raw_io.output_text@Flaky/Test/1@@@",
      "@@@STEP_LOG_LINE@raw_io.output_text@Flaky/Test/2@@@",
      "@@@STEP_LOG_END@raw_io.output_text@@@"
    ]
  },
  {
    "cmd": [],
    "name": "deflaking.trigger shards for co19",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "[CACHE]/builder/sdk/tools/swarming_client/swarming.py",
      "trigger",
      "--shards",
      "1",
      "--swarming",
      "https://chromium-swarm.appspot.com",
      "--isolate-server",
      "https://isolateserver.appspot.com",
      "--namespace",
      "default-gzip",
      "--priority",
      "25",
      "--task-name",
      "co19_shard_1/Linux/test_hash/co19/1357",
      "--dump-json",
      "/path/to/tmp/json",
      "--expiration",
      "3600",
      "--io-timeout",
      "1200",
      "--hard-timeout",
      "3600",
      "--dimension",
      "cpu",
      "x86-64",
      "--dimension",
      "os",
      "Linux",
      "--dimension",
      "pool",
      "dart.tests",
      "--named-cache",
      "swarming_module_cache_vpython",
      ".swarming_module_cache/vpython",
      "--tag",
      "build_is_experimental:false",
      "--tag",
      "buildername:co19",
      "--tag",
      "buildnumber:1357",
      "--tag",
      "data:test_hash",
      "--tag",
      "name:co19_shard_1",
      "--tag",
      "slavename:trusty-dart-123",
      "--tag",
      "spec_name:dart.ci:co19",
      "--tag",
      "stepname:co19_shard_1",
      "--cipd-package",
      ".swarming_module:infra/tools/luci/logdog/butler/${platform}:TEST_VERSION",
      "--cipd-package",
      ".swarming_module:infra/tools/luci/vpython-native/${platform}:TEST_VERSION",
      "--cipd-package",
      ".swarming_module:infra/tools/luci/vpython/${platform}:TEST_VERSION",
      "--cipd-package",
      ".swarming_module/cpython:infra/python/cpython/${platform}:TEST_VERSION",
      "--cipd-package",
      ".swarming_module/cpython3:infra/python/cpython3/${platform}:TEST_VERSION",
      "--cipd-package",
      "tests/co19/src:dart/third_party/co19:git_revision:co19_hash",
      "--cipd-package",
      "tests/co19_2/src:dart/third_party/co19/legacy:git_revision:co19_2_hash",
      "--cipd-package",
      "tools/sdks:dart/dart-sdk/${platform}:",
      "--env-prefix",
      "PATH",
      ".swarming_module",
      "--env-prefix",
      "PATH",
      ".swarming_module/cpython/bin",
      "--env-prefix",
      "PATH",
      ".swarming_module/cpython3/bin",
      "--env-prefix",
      "VPYTHON_VIRTUALENV_ROOT",
      ".swarming_module_cache/vpython",
      "--isolated",
      "test_hash",
      "--raw-cmd",
      "--",
      "tools/test.py",
      "--progress=status",
      "--report",
      "--time",
      "--silent-failures",
      "--write-results",
      "--write-logs",
      "--clean-exit",
      "co19",
      "co19_2",
      "--repeat=5",
      "--tests",
      "Flaky/Test/1\nFlaky/Test/2",
      "--copy-coredumps",
      "--shards=1",
      "--shard=1",
      "--output-directory=${ISOLATED_OUTDIR}"
    ],
    "cwd": "[CACHE]/builder/sdk",
    "env": {
      "BUILDBOT_BUILDERNAME": "co19-be"
    },
    "env_suffixes": {
      "PATH": [
        "RECIPE_REPO[depot_tools]"
      ]
    },
    "infra_step": true,
    "name": "deflaking.trigger shards for co19.[trigger] co19_shard_1",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@2@@@",
      "@@@STEP_TEXT@Run on OS: 'Linux'@@@",
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"base_task_name\": \"co19_shard_1/Linux/test_hash/co19/1357\", @@@",
      "@@@STEP_LOG_LINE@json.output@  \"tasks\": {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"co19_shard_1/Linux/test_hash/co19/1357\": {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"shard_index\": 0, @@@",
      "@@@STEP_LOG_LINE@json.output@      \"task_id\": \"110000\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"view_url\": \"https://chromium-swarm.appspot.com/user/task/110000\"@@@",
      "@@@STEP_LOG_LINE@json.output@    }@@@",
      "@@@STEP_LOG_LINE@json.output@  }@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@",
      "@@@STEP_LINK@shard #0@https://chromium-swarm.appspot.com/user/task/110000@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "RECIPE_REPO[build]/scripts/tools/runit.py",
      "--show-path",
      "--with-third-party-lib",
      "--",
      "python",
      "RECIPE_MODULE[build::chromium_swarming]/resources/collect_task.py",
      "--verbose",
      "-o",
      "/path/to/tmp/json",
      "--task-output-dir",
      "/path/to/tmp/",
      "--merge-script",
      "RECIPE_MODULE[build::chromium_swarming]/resources/noop_merge.py",
      "--merge-script-stdout-file",
      "/path/to/tmp/merge_script_log",
      "--merge-additional-args",
      "[]",
      "--summary-json-file",
      "/path/to/tmp/json",
      "--",
      "swarming",
      "collect",
      "-server",
      "https://chromium-swarm.appspot.com",
      "-worker",
      "50",
      "-task-summary-python",
      "-task-output-stdout",
      "all",
      "-verbose",
      "-requests-json",
      "{\"tasks\": [{\"task_id\": \"110000\"}]}"
    ],
    "env_prefixes": {
      "PATH": [
        "[CACHE]/swarming_client"
      ]
    },
    "name": "deflaking.co19_shard_1",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@",
      "@@@STEP_TEXT@Run on OS: 'Linux'<br>Pending time: 1m 11s<br>Shard runtime (32s) + overhead (29s): 1m 0s@@@",
      "@@@STEP_LOG_LINE@json.output@{}@@@",
      "@@@STEP_LOG_END@json.output@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@{@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@  \"shards\": [@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@    {@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"bot_id\": \"vm30\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"completed_ts\": \"2014-09-25T01:43:11.123\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"created_ts\": \"2014-09-25T01:41:00.123\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"duration\": 31.5, @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"exit_code\": 0, @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"failure\": false, @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"internal_failure\": false, @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"modified_ts\": \"2014-09-25 01:42:00\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"name\": \"heartbeat-canary-2014-09-25_01:41:55-os=Windows\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"output\": \"Heart beat succeeded on win32.\\nFoo\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"outputs_ref\": {@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@        \"isolated\": \"abc123\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@        \"isolatedserver\": \"https://isolateserver.appspot.com\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@        \"namespace\": \"default-gzip\"@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      }, @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"started_ts\": \"2014-09-25T01:42:11.123\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"state\": \"COMPLETED\", @@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@      \"task_id\": \"148aa78d7aa0000\"@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@    }@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@  ]@@@",
      "@@@STEP_LOG_LINE@chromium_swarming.summary@}@@@",
      "@@@STEP_LOG_END@chromium_swarming.summary@@@",
      "@@@STEP_LOG_LINE@Merge script log@Successfully merged all data@@@",
      "@@@STEP_LOG_END@Merge script log@@@",
      "@@@STEP_LOG_LINE@results.json@{\"name\":\"Flaky/Test/1\"}@@@",
      "@@@STEP_LOG_LINE@results.json@{\"name\":\"Flaky/Test/2\"}@@@",
      "@@@STEP_LOG_END@results.json@@@",
      "@@@STEP_LOG_LINE@logs.json@{\"Flaky/Test/1\":\"log\"}@@@",
      "@@@STEP_LOG_LINE@logs.json@{\"Flaky/Test/2\":\"log\"}@@@",
      "@@@STEP_LOG_END@logs.json@@@",
      "@@@STEP_LINK@shard #0 isolated out@https://isolateserver.appspot.com/browse?namespace=default-gzip&hash=abc123@@@",
      "@@@STEP_LINK@test stdout of shard #0@https://chromium-swarm.appspot.com/user/task/110000@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "RECIPE_MODULE[depot_tools::gsutil]/resources/gsutil_smart_retry.py",
      "--",
      "RECIPE_REPO[depot_tools]/gsutil.py",
      "----",
      "cp",
      "",
      "gs://dart-test-results/builders/current_flakiness/single_directory/flaky_current_co19.json"
    ],
    "cwd": "[CACHE]/builder/sdk",
    "infra_step": true,
    "name": "upload new results.gsutil upload flaky_current_co19.json",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@",
      "@@@STEP_LINK@gsutil.upload@https://storage.cloud.google.com/dart-test-results/builders/current_flakiness/single_directory/flaky_current_co19.json@@@"
    ]
  }
]
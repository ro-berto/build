[
  {
    "cmd": [],
    "name": "test_pre_run"
  },
  {
    "cmd": [
      "rdb",
      "stream",
      "-var",
      "builder:test_buildername",
      "-var",
      "test_suite:base_unittests",
      "-tag",
      "step_name:base_unittests",
      "-coerce-negative-duration",
      "-new",
      "-realm",
      "chromium:ci",
      "-include",
      "-exonerate-unexpected-pass",
      "--",
      "python",
      "-u",
      "RECIPE_REPO[build]/scripts/tools/runit.py",
      "--show-path",
      "--with-third-party-lib",
      "--",
      "python",
      "RECIPE_REPO[build]/recipes/runtest.py",
      "--target",
      "Release",
      "--xvfb",
      "--build-properties",
      "{\"bot_id\": \"test_bot_id\", \"builder_group\": \"test_group\", \"buildername\": \"test_buildername\", \"buildnumber\": 123, \"recipe\": \"chromium_tests:tests/api/create_test_runner\", \"retry_failed_shards\": true, \"slavename\": \"test_bot_id\"}",
      "--annotate=gtest",
      "--test-type=base_unittests",
      "--step-name=base_unittests",
      "--test-launcher-summary-output",
      "[CLEANUP]/tmp_tmp_1",
      "--builder-name=test_buildername",
      "--slave-name=test_bot_id",
      "--build-number=571",
      "base_unittests"
    ],
    "cwd": "[CACHE]/builder",
    "env": {
      "BUILD_SLAVE_UTILS_GSUTIL_PY_PATH": "RECIPE_REPO[depot_tools]/gsutil.py",
      "CHROME_HEADLESS": "1"
    },
    "luci_context": {
      "realm": {
        "name": "chromium:ci"
      },
      "resultdb": {
        "current_invocation": {
          "name": "invocations/build:8945511751514863184",
          "update_token": "token"
        },
        "hostname": "rdbhost"
      }
    },
    "name": "base_unittests",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@raw_io.output_text[stderr]@rdb-stream: included \"invocations/test-inv\" in \"build-inv\"@@@",
      "@@@STEP_LOG_END@raw_io.output_text[stderr]@@@",
      "@@@STEP_FAILURE@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "RECIPE_MODULE[build::test_results]/resources/upload_test_results.py",
      "--input-json",
      "{}",
      "--builder-group",
      "test_group",
      "--builder-name",
      "test_buildername",
      "--build-number",
      "571",
      "--test-type",
      "base_unittests",
      "--chrome-revision",
      "refs/x@{#0}",
      "--build-id",
      "8945511751514863184",
      "--test-results-server",
      "test-results.appspot.com"
    ],
    "luci_context": {
      "realm": {
        "name": "chromium:ci"
      },
      "resultdb": {
        "current_invocation": {
          "name": "invocations/build:8945511751514863184",
          "update_token": "token"
        },
        "hostname": "rdbhost"
      }
    },
    "name": "Upload to test-results [base_unittests]"
  },
  {
    "cmd": [
      "rdb",
      "rpc",
      "luci.resultdb.v1.ResultDB",
      "QueryTestResultStatistics"
    ],
    "infra_step": true,
    "luci_context": {
      "realm": {
        "name": "chromium:ci"
      },
      "resultdb": {
        "current_invocation": {
          "name": "invocations/build:8945511751514863184",
          "update_token": "token"
        },
        "hostname": "rdbhost"
      }
    },
    "name": "base_unittests stats",
    "stdin": "{\"invocations\": [\"invocations/test-inv\"]}",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@{}@@@",
      "@@@STEP_LOG_END@json.output@@@",
      "@@@STEP_LOG_LINE@json.input@{@@@",
      "@@@STEP_LOG_LINE@json.input@  \"invocations\": [@@@",
      "@@@STEP_LOG_LINE@json.input@    \"invocations/test-inv\"@@@",
      "@@@STEP_LOG_LINE@json.input@  ]@@@",
      "@@@STEP_LOG_LINE@json.input@}@@@",
      "@@@STEP_LOG_END@json.input@@@"
    ]
  },
  {
    "cmd": [
      "rdb",
      "query",
      "-json",
      "-n",
      "1000",
      "-u",
      "-tr-fields",
      "testId,variant,variantHash,status,tags,expected",
      "test-inv"
    ],
    "infra_step": true,
    "luci_context": {
      "realm": {
        "name": "chromium:ci"
      },
      "resultdb": {
        "current_invocation": {
          "name": "invocations/build:8945511751514863184",
          "update_token": "token"
        },
        "hostname": "rdbhost"
      }
    },
    "name": "base_unittests results",
    "~followup_annotations": [
      "@@@STEP_LOG_END@raw_io.output@@@"
    ]
  },
  {
    "cmd": [
      "rdb",
      "rpc",
      "luci.resultdb.v1.Recorder",
      "UpdateIncludedInvocations",
      "-include-update-token"
    ],
    "infra_step": true,
    "luci_context": {
      "realm": {
        "name": "chromium:ci"
      },
      "resultdb": {
        "current_invocation": {
          "name": "invocations/build:8945511751514863184",
          "update_token": "token"
        },
        "hostname": "rdbhost"
      }
    },
    "name": "include local test invocations",
    "stdin": "{\"addInvocations\": [\"invocations/test-inv\"], \"includingInvocation\": \"invocations/build:8945511751514863184\"}",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@{}@@@",
      "@@@STEP_LOG_END@json.output@@@",
      "@@@STEP_LOG_LINE@json.input@{@@@",
      "@@@STEP_LOG_LINE@json.input@  \"addInvocations\": [@@@",
      "@@@STEP_LOG_LINE@json.input@    \"invocations/test-inv\"@@@",
      "@@@STEP_LOG_LINE@json.input@  ], @@@",
      "@@@STEP_LOG_LINE@json.input@  \"includingInvocation\": \"invocations/build:8945511751514863184\"@@@",
      "@@@STEP_LOG_LINE@json.input@}@@@",
      "@@@STEP_LOG_END@json.input@@@"
    ]
  },
  {
    "cmd": [],
    "name": "$debug - all results",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@serialzed results@{@@@",
      "@@@STEP_LOG_LINE@serialzed results@  \"all_suites\": [@@@",
      "@@@STEP_LOG_LINE@serialzed results@    {@@@",
      "@@@STEP_LOG_LINE@serialzed results@      \"invalid\": \"True\", @@@",
      "@@@STEP_LOG_LINE@serialzed results@      \"suite_name\": \"base_unittests\", @@@",
      "@@@STEP_LOG_LINE@serialzed results@      \"test_name_to_test_id_mapping\": {}, @@@",
      "@@@STEP_LOG_LINE@serialzed results@      \"total_tests_ran\": 0, @@@",
      "@@@STEP_LOG_LINE@serialzed results@      \"unexpected_failing_tests\": [], @@@",
      "@@@STEP_LOG_LINE@serialzed results@      \"unexpected_passing_tests\": [], @@@",
      "@@@STEP_LOG_LINE@serialzed results@      \"unexpected_skipped_tests\": [], @@@",
      "@@@STEP_LOG_LINE@serialzed results@      \"variant_hash\": \"\"@@@",
      "@@@STEP_LOG_LINE@serialzed results@    }@@@",
      "@@@STEP_LOG_LINE@serialzed results@  ], @@@",
      "@@@STEP_LOG_LINE@serialzed results@  \"unexpected_failing_suites\": [@@@",
      "@@@STEP_LOG_LINE@serialzed results@    \"base_unittests\"@@@",
      "@@@STEP_LOG_LINE@serialzed results@  ]@@@",
      "@@@STEP_LOG_LINE@serialzed results@}@@@",
      "@@@STEP_LOG_END@serialzed results@@@"
    ]
  },
  {
    "failure": {
      "failure": {},
      "humanReason": "1 Test Suite(s) failed.\n\n**base_unittests** failed."
    },
    "name": "$result"
  }
]
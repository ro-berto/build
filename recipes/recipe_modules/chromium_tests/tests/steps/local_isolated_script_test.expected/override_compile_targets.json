[
  {
    "cmd": [
      "python",
      "-u",
      "RECIPE_MODULE[depot_tools::git]/resources/git_setup.py",
      "--path",
      "[START_DIR]/swarming.client",
      "--url",
      "https://chromium.googlesource.com/infra/luci/client-py.git"
    ],
    "name": "git setup (swarming_client)"
  },
  {
    "cmd": [
      "git",
      "fetch",
      "origin",
      "--progress"
    ],
    "cwd": "[START_DIR]/swarming.client",
    "env": {
      "PATH": "RECIPE_REPO[depot_tools]:<PATH>"
    },
    "infra_step": true,
    "name": "git fetch (swarming_client)"
  },
  {
    "cmd": [
      "git",
      "checkout",
      "-f",
      "a32a1607f6093d338f756c7e7c7b4333b0c50c9c"
    ],
    "cwd": "[START_DIR]/swarming.client",
    "infra_step": true,
    "name": "git checkout (swarming_client)"
  },
  {
    "cmd": [
      "git",
      "rev-parse",
      "HEAD"
    ],
    "cwd": "[START_DIR]/swarming.client",
    "infra_step": true,
    "name": "read revision",
    "~followup_annotations": [
      "@@@STEP_TEXT@<br/>checked out u'deadbeef'<br/>@@@"
    ]
  },
  {
    "cmd": [
      "git",
      "clean",
      "-f",
      "-d",
      "-x"
    ],
    "cwd": "[START_DIR]/swarming.client",
    "infra_step": true,
    "name": "git clean (swarming_client)"
  },
  {
    "cmd": [
      "git",
      "submodule",
      "sync"
    ],
    "cwd": "[START_DIR]/swarming.client",
    "infra_step": true,
    "name": "submodule sync (swarming_client)"
  },
  {
    "cmd": [
      "git",
      "submodule",
      "update",
      "--init",
      "--recursive"
    ],
    "cwd": "[START_DIR]/swarming.client",
    "infra_step": true,
    "name": "submodule update (swarming_client)"
  },
  {
    "cmd": [
      "rdb",
      "stream",
      "-var",
      "builder:test_buildername",
      "-var",
      "test_suite:base_unittests",
      "-tag",
      "step_name:base_unittests",
      "-coerce-negative-duration",
      "-new",
      "-realm",
      "chromium:ci",
      "-include",
      "-exonerate-unexpected-pass",
      "--",
      "None/tools/resultdb/result_adapter",
      "json",
      "-result-file",
      "[CLEANUP]/tmp_tmp_1",
      "-artifact-directory",
      "[CLEANUP]",
      "--",
      "python",
      "-u",
      "RECIPE_REPO[build]/scripts/tools/runit.py",
      "--show-path",
      "--with-third-party-lib",
      "--",
      "python",
      "[START_DIR]/swarming.client/run_isolated.py",
      "--verbose",
      "-I",
      "https://isolateserver.appspot.com",
      "--isolated",
      "ffffffffffffffffffffffffffffffffffffffff",
      "--",
      "--isolated-script-test-output",
      "[CLEANUP]/tmp_tmp_1"
    ],
    "name": "base_unittests",
    "~followup_annotations": [
      "@@@STEP_TEXT@<br/>Total tests: n/a<br/>@@@",
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"failures\": [], @@@",
      "@@@STEP_LOG_LINE@json.output@  \"valid\": true@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@",
      "@@@STEP_LOG_END@raw_io.output[stderr]@@@"
    ]
  },
  {
    "cmd": [],
    "name": "details",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@details@compile_targets: 'base_unittests_run'@@@",
      "@@@STEP_LOG_LINE@details@isolate_target: 'base_unittests'@@@",
      "@@@STEP_LOG_LINE@details@uses_local_devices: False@@@",
      "@@@STEP_LOG_LINE@details@uses_isolate: True@@@",
      "@@@STEP_LOG_END@details@@@"
    ]
  },
  {
    "name": "$result"
  }
]